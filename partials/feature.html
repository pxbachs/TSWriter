<div class="scriptWriter" >

	<div id="sidebar-wrapper" ng-controller="StepsController" >

		<ul class="sidebar-nav">
			<li >
				<span>STEPS</span>
			</li>

			<li ng-repeat="group in steps_def">
				<div class="">
					<div class="">
						<h4 class="list-group-item"><a data-toggle="collapse" href="~/#div_{{group.id}}">{{group.name}}</a></h4>
					</div>
					<div id="div_{{group.id}}" class="panel-collapse collapse">

						<ul dnd-list="group.steps"  class="list-group"
						dnd-disable-if="true">
							<li ng-repeat="step in group.steps"
							dnd-draggable="step"
							dnd-effect-allowed="copy"
							dnd-type="step.type"
							ng-class="{selected: models.selected === step}"
							>
								<div class="">
									{{step.syntax}}
								</div>
							</li>
						</ul>
					</div>
				</div>
			</li>
		</ul>
	</div>

	<!-- TODO feature here -->
	<div class="col-md-9"  ng-controller="FeatureController">
		<ul class="list-group" dnd-list="steps_def"
		dnd-allowed-types="scenarioAllowedTypes">
			<li class="panel-group" ng-repeat="group in steps_def"
			dnd-draggable="group"
			dnd-effect-allowed="move"
			dnd-moved="steps_def.splice($index, 1)"
			dnd-type="group.type"
			>
				<div class="dropzone panel panel-default">
					<div class="panel-heading">
						<h4 class="panel-title"><a data-toggle="collapse" href="~/#div2_{{group.id}}">Scenario: </a>
						<div class="name">
							<input type="text" ng-model="group.name" class="form-control input-sm">
						</div></h4>
					</div>
					<div id="div2_{{group.id}}" class="panel-collapse collapse">

						<ul dnd-list="group.steps"
						dnd-allowed-types="stepAllowedTypes">
							<li ng-repeat="step in group.steps"
							dnd-draggable="step"
							dnd-type="step.type"
							dnd-effect-allowed="move"
							dnd-moved="group.steps.splice($index, 1)"
							dnd-selected="models.selected = step"
							ng-class="{selected: models.selected === step}"
							>
								<div class="item">
									{{step.syntax}}
									<input type="button" class="btn btn-default" value="AA" ng-click="showEdit(this)"/>
								</div>
							</li>
							<li class="dndPlaceholder">
								Drop STEP here
							</li>
						</ul>
					</div>
				</div>
			</li>

			<li class="dndPlaceholder">
				Drop any <strong>{{scenarioAllowedTypes.join(' or ')}}</strong> here
			</li>
		</ul>
	</div>
	<!-- TODO toolbox here -->
	<div class="nav-right">
		<div class="toolbox box box-grey box-padding">
			<h5>New Elements</h5>
			<ul id="toolbox">
				<!-- The toolbox only allows to copy objects, not move it. After a new
				element was created, dnd-copied is invoked and we generate the next id -->
				<li ng-repeat="item in models.templates"
				dnd-draggable="item"
				dnd-effect-allowed="copy"
				dnd-type="item.type"
				dnd-copied="item.index = item.index + 1; item.id = 'scenario_' + item.index"
				>
					<div class="item">
						{{item.name}}
					</div>
				</li>
			</ul>
		</div>

		<div class="trashcan box box-grey box-padding">
			<!-- If you use [] as referenced list, the dropped elements will be lost -->
			<h5>Trashcan</h5>
			<ul dnd-list="[]">
				<li><img src="trashcan.jpg">
				</li>
			</ul>
		</div>
	</div>
</div>
